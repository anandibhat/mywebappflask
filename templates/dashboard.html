{% extends 'base.html' %}

{% block content %}
<h2>Welcome, {{ name }}!</h2>
<p>Email: {{ email }}</p>

{% if not google_user %}
<!-- Google Sign-In Button -->
<div class="g-signin2" data-onsuccess="onSignIn" data-clientid="{{ CLIENT_ID }}" data-redirecturi="{{ REDIRECT_URI }}"></div>

<script>
function onSignIn(googleUser) {
  var id_token = googleUser.getAuthResponse().id_token;
  var xhr = new XMLHttpRequest();
  xhr.open('POST', '/google-signin');
  xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
  xhr.onload = function() {
    if (xhr.status === 200) {
      window.location.href = '/dashboard';
    }
  };
  xhr.send('idtoken=' + id_token);
}
</script>
{% endif %}

{% endblock %}


