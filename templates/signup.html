{% extends 'base.html' %}

{% block content %}
<h2>Sign up</h2>
{% if error %}
<p class="error">{{ error }}</p>
{% endif %}
<form method="post" action="{{ url_for('signup') }}">
    <label for="name">Name:</label>
    <input type="text" name="name" id="name" required>
    <label for="email">Email:</label>
    <input type="email" name="email" id="email" required>
    <label for="password">Password:</label>
    <input type="password" name="password" id="password" required>
    <input type="submit" value="Sign up">
</form>
<br>
<p>Or sign up with:</p>
<div class="g-signin2" data-onsuccess="onSignIn" data-theme="dark"></div>
<script>
    function onSignIn(googleUser) {
        // Get the Google account ID token and send it to the server for verification
        var id_token = googleUser.getAuthResponse().id_token;
        var xhr = new XMLHttpRequest();
        xhr.open('POST', '/google-signin');
        xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
        xhr.onload = function() {
            if (xhr.status === 200) {
                // Redirect to the dashboard page if the Google Sign-In was successful
                window.location.href = '/dashboard';
            } else {
                alert('Google Sign-In failed. Please try again later.');
            }
        };
        xhr.send('idtoken=' + id_token);
    }
</script>
{% endblock %}



